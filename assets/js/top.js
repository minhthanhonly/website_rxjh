var t,i=.5,e=new Audio,n=!0;function o(){var t,o,a,s,d,r=navigator.userAgent;if(!(r.indexOf("iPhone")>0||r.indexOf("iPod")>0||r.indexOf("Android")>0&&r.indexOf("Mobile")>0||r.indexOf("iPad")>0)&&n){e.volume=0;var h=!1,l=e.play();void 0!==l&&l.then((function(){})).catch((function(t){$(".soundBtn").addClass("off"),n=!1,h=setInterval((function(){var t=e.play();e.paused||clearInterval(h),t.then((function(){$(".soundBtn").removeClass("off"),n=!0})).catch((function(t){}))}),1e3)}));var u=setInterval((function(){e.volume=e.volume+.005,e.volume>=.495&&(e.volume=i,clearInterval(u))}),10);t=function(){e.muted=!0},o=function(){e.muted=!1},void 0!==document.hidden?(a="hidden",d="visibilitychange",s="visibilityState"):void 0!==document.mozHidden?(a="mozHidden",d="mozvisibilitychange",s="mozVisibilityState"):void 0!==document.msHidden?(a="msHidden",d="msvisibilitychange",s="msVisibilityState"):void 0!==document.webkitHidden&&(a="webkitHidden",d="webkitvisibilitychange",s="webkitVisibilityState"),void 0===document.addEventListener||void 0===a||document.addEventListener(d,(function(){switch(document[s]){case"visible":o&&o();break;case"hidden":t&&t()}}),!1)}}(t=navigator.userAgent).indexOf("iPhone")>0||t.indexOf("iPod")>0||t.indexOf("Android")>0&&t.indexOf("Mobile")>0||t.indexOf("iPad")>0?$(".fixedParts").hide():(e.src="/assets/music/bgm01.mp3",e.load(),e.loop=!0),$((function(){localStorage.getItem("isStopAudio")?(n=!1,$(".soundBtn").addClass("off")):n=!0,n&&o(),$(".soundBtn").on("click",(function(t){return $(".soundBtn").toggleClass("off"),(n=!n)?(o(),localStorage.removeItem("isStopAudio")):(!function(){var t=navigator.userAgent;if(!(t.indexOf("iPhone")>0||t.indexOf("iPod")>0||t.indexOf("Android")>0&&t.indexOf("Mobile")>0||t.indexOf("iPad")>0))var n=setInterval((function(){var t=e.volume-.005;e.volume=t<0?0:t,e.volume<=.005&&(e.volume=i,e.pause(),clearInterval(n))}),10)}(),localStorage.setItem("isStopAudio",!0)),!1}));var t=function(t){this.viewport=t,this.world=document.createElement("div"),this.leaves=[],this.options={numLeaves:15,wind:{magnitude:1,maxSpeed:3,duration:600,start:0,speed:0}},this.width=this.viewport.offsetWidth,this.height=this.viewport.offsetHeight,this.timer=0,this._resetLeaf=function(t){t.x=1*this.width-Math.random()*this.width*1.75,t.y=-2,t.z=200*Math.random(),t.x>this.width&&(t.x=this.width+10,t.y=Math.random()*this.height/2),0==this.timer&&(t.y=Math.random()*this.height),t.rotation.speed=5*Math.random();var i=Math.random();return i>.5?t.rotation.axis="X":i>.25?(t.rotation.axis="Y",t.rotation.x=180*Math.random()+90):(t.rotation.axis="Z",t.rotation.x=360*Math.random()-180,t.rotation.speed=3*Math.random()),t.xSpeedVariation=5*-Math.random()-.4,t.ySpeed=Math.random()+.5,t},this._updateLeaf=function(t){var i=this.options.wind.speed(this.timer-this.options.wind.start,t.y)+t.xSpeedVariation;t.x-=i,t.y+=t.ySpeed,t.rotation.value+=t.rotation.speed;var e="translateX( "+t.x+"px ) translateY( "+t.y+"px ) translateZ( "+t.z+"px )  rotate"+t.rotation.axis+"( "+t.rotation.value+"deg )";"X"!==t.rotation.axis&&(e+=" rotateX("+t.rotation.x+"deg)"),t.el.style.webkitTransform=e,t.el.style.MozTransform=e,t.el.style.oTransform=e,t.el.style.transform=e,(t.x<-10||t.y>this.height+10)&&this._resetLeaf(t)},this._updateWind=function(){if(0===this.timer||this.timer>this.options.wind.start+this.options.wind.duration){this.options.wind.magnitude=Math.random()*this.options.wind.maxSpeed,this.options.wind.duration=50*this.options.wind.magnitude+(20*Math.random()-10),this.options.wind.start=this.timer;var t=this.height;this.options.wind.speed=function(i,e){var n=this.magnitude/2*(t-2*e/3)/t;return n*Math.sin(2*Math.PI/this.duration*i+3*Math.PI/2)+n}}}};t.prototype.init=function(){for(var t=0;t<this.options.numLeaves;t++){var i={el:document.createElement("div"),x:0,y:0,z:0,rotation:{axis:"X",value:0,speed:0,x:0},xSpeedVariation:0,ySpeed:0,path:{type:1,start:0},image:1};this._resetLeaf(i),this.leaves.push(i),this.world.appendChild(i.el)}this.world.className="leaf-scene",this.viewport.appendChild(this.world),this.world.style.webkitPerspective="400px",this.world.style.MozPerspective="400px",this.world.style.oPerspective="400px",this.world.style.perspective="400px";var e=this;window.onresize=function(t){e.width=e.viewport.offsetWidth,e.height=e.viewport.offsetHeight}},t.prototype.render=function(){this._updateWind();for(var t=0;t<this.leaves.length;t++)this._updateLeaf(this.leaves[t]);this.timer++,requestAnimationFrame(this.render.bind(this))};var a=new t(document.querySelector(".falling-leaves"));a.init(),a.render()}));